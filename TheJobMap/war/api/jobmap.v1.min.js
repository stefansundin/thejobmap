var jobmap={user:null,categories:{administration:"Administration",construction:"Construction",projectLeader:"Project leader",computerScience:"Computer science",disposalPromotion:"Disposal & promotion",hotelRestaurant:"Hotel & restaurant",medicalService:"Health & medical service",industrialManufacturing:"Industrial manufacturing",installation:"Installation",cultureMedia:"Culture, media, design",military:"Military",environmentalScience:"Environmental science",pedagogical:"Pedagogical",social:"Social work",
security:"Security",technical:"Technical",transport:"Transport",other:"Other"},init:function(){$.ajaxSetup({contentType:"application/json; charset=UTF-8"})},clearMarkers:function(){jobmap.markers=[];jobmap.mapMarkers=[]},getMarkers:function(a,b){$.getJSON("/rest/marker/"+a).done(function(a){b(a)})},postMarker:function(a,b){$.ajax({url:"/rest/marker/"+(a.id?a.id:""),type:"POST",dataType:"json",data:JSON.stringify(a)}).done(function(a){b(a)})},deleteMarker:function(a,b){$.ajax({url:"/rest/marker/"+
a,type:"DELETE"}).done(function(a){b(a)})},applyJob:function(a,b,c){$.ajax({url:"/rest/apply/"+a,type:"POST",dataType:"json",data:JSON.stringify(b)}).done(function(a){c(a)})},getLoginUrls:function(a){$.getJSON("/rest/openid").done(function(b){a(b)})},getUser:function(a){$.getJSON("/rest/user/me").done(function(b){jobmap.user="fail"==b.result?null:b;a(b)})},logout:function(){window.location.assign(jobmap.user.logoutUrl)},isOwner:function(a){return jobmap.user&&jobmap.user.email==a.author},getUsername:function(){return!jobmap.user?
" ":jobmap.user.name?jobmap.user.name:jobmap.user.email},updateUser:function(a,b){$.ajax({url:"/rest/user/me",type:"POST",dataType:"json",data:JSON.stringify(a)}).done(function(c){$.extend(jobmap.user,a);b(c)})},getCvUploadUrl:function(a){$.getJSON("/rest/user/me/cv/uploadUrl").done(function(b){a(b)})},deleteCv:function(a){$.ajax({url:"/rest/user/me/cv",type:"DELETE"}).done(function(b){jobmap.user.cvUploaded=!1;a(b)})}};